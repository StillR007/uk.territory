function showPopup(e){e.preventDefault(),document.querySelector(".form-container").classList.add("active"),document.querySelector("body").classList.add("lock");let t=this.closest(".appeals-main__column-5").closest(".appeals-main").querySelector(".appeals-main__number");document.querySelector("#appeal-id").setAttribute("value",""+t.innerText);const o=[...document.querySelector(".form-stars").querySelectorAll("svg")];o.forEach(e=>{e.addEventListener("click",(function(){for(;document.querySelector(".form-stars").querySelector("svg.checked");)document.querySelector(".form-stars").querySelector("svg.checked").classList.remove("checked");let t=o.indexOf(e);for(let e=0;e<=t;e++)o[e].classList.add("checked");document.querySelector("#appeal-rating").setAttribute("value",""+(t+1))}))})}let buttonsNode=document.querySelectorAll(".btn.btn-territory.post-comment"),buttons=[...buttonsNode];function sendComment(){function e(){document.querySelector(".form-container").classList.remove("active"),document.querySelector("body").classList.remove("lock")}BX.showWait();let t=document.querySelector("#appeal-rating").value,o=document.querySelector("#appeal-comment").value,c=document.querySelector("#appeal-id").value;$.ajax({type:"POST",url:"/rest/requests/addFeedback.ajax.php",cache:!1,data:{raiting:t,comment:o,elementId:c},dataType:"json",success:function(t){if(t.data&&200==t.code){alertify.alert("Спасибо","Ваш отзыв принят").set("onok",(function(){e(),location.reload()}))}},error:function(t){alertify.alert("ВНИМАНИЕ","Ошибка отправки запроса!").set("onok",(function(){console.log(t),e()}))},complete:function(){BX.closeWait(),e(),location.reload()}})}buttons.forEach(e=>{e.addEventListener("click",showPopup,!1)}),document.querySelector("#close-form").addEventListener("click",(function(){document.querySelector(".form-container").classList.remove("active"),document.querySelector("body").classList.remove("lock")}));const allAppeals=document.querySelectorAll(".appeals-main.active");