const metersUpdatesNode=document.querySelectorAll(".meters__last-update"),metersUpdates=[...metersUpdatesNode],metersItemsNode=document.querySelectorAll(".meters__items"),metersItems=[...metersItemsNode];function updateDates(e,t){e&&(metersUpdates[t].innerHTML="Последняя передача:<br />"+e)}let maxMeters=[];function getMonth(e){switch(e){case"янв":return"январь";case"фев":return"февраль";case"мар":return"март";case"апр":return"апрель";case"май":return"май";case"июн":return"июнь";case"июл":return"июль";case"авг":return"август";case"сен":return"сентябрь";case"окт":return"октябрь";case"ноя":return"ноябрь";case"дек":return"декабрь"}}function showMeters(e,t){if(console.log(e),"200"==e.code&&e.data.history){let s=[],r=[],n=[];for(let[a,m]of Object.entries(e.data.history)){let e=m.meter,c=m.delta,l=m.date;updateDates(l,t);let o=document.createElement("p");o.className="meters__item--number",c?(o.innerText=c,s.push(c)):s.push(0);let d=document.createElement("div");d.className="meters__item";let u=document.createElement("p");u.className="meters__item--rect";let p=document.createElement("p");p.className="meters__item--month",p.innerText=a,n.push(e),r.push(u);let i=document.createElement("div");i.className="meters__item-popup";let _=document.createElement("div");_.className="meters__item-popup--bold",_.innerText=getMonth(a);let h=document.createElement("p");h.innerText=""+l;let f=document.createElement("p");f.innerText="расход: "+c;let E=document.createElement("p");E.innerText="всего: "+e,u.addEventListener("mouseover",()=>{u.closest(".meters__item").classList.add("active")}),u.addEventListener("mouseout",()=>{u.closest(".meters__item").classList.remove("active")}),i.append(_),i.append(h),i.append(E),i.append(f),u.append(i),d.append(o),d.append(u),d.append(p),metersItems[t].append(d)}let a=Math.max(...n);maxMeters.push(a),colorGrafs(Math.max(...s),s,r)}else noMeters()}function colorGrafs(e,t,s){let r=e;t.forEach((e,t)=>{if(e>0){let n=e/r*100,a=s[t];a.style.height=n+"px",a.style.background="#32bbffb0"}})}